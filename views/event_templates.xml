<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Override Event Registration Button to Redirect to Store -->
        <template id="event_registration_button_store_redirect" inherit_id="website_event.registration_template" name="Event Registration Button Store Redirect">
            <xpath expr="//button[contains(text(), 'Register')]" position="replace">
                <button t-if="event.redirect_to_store and event.event_registrations_open"
                        t-att-href="event.get_store_redirect_url()"
                        type="button"
                        t-attf-class="btn btn-primary {{cta_additional_classes}}"
                        onclick="window.location.href=this.getAttribute('href')">
                    <i class="fa fa-shopping-cart me-2"></i>
                    Buy Tickets
                </button>
                <button t-elif="event.event_registrations_open"
                        type="button"
                        data-bs-toggle="modal"
                        data-bs-target="#modal_ticket_registration"
                        t-attf-class="btn btn-primary {{cta_additional_classes}}">
                    <i class="fa fa-ticket me-2"></i>
                    Register
                </button>
            </xpath>
        </template>

        <!-- Override Event List Link to Redirect to Store -->
        <template id="event_list_link_store_redirect" inherit_id="website_event.events_list" name="Event List Link Store Redirect">
            <xpath expr="//a[contains(@href, '/register')]" position="attributes">
                <attribute name="t-att-href">event.redirect_to_store and event.get_store_redirect_url() or '/event/' + str(event.id) + '/register'</attribute>
            </xpath>
        </template>
    </data>
</odoo>
